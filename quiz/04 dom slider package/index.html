<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>slider</title>
    <style>
      .slider {
        padding: 5px 0;
        position: relative;
        margin: 30px 10%;
        --percent: 0;
      }
      .slider-track {
        display: block;
        width: 100%;
        height: 6px;
        background-color: lightgray;
        border: 0;
        padding: 0;
      }
      .slider-track::before {
        content: "";
        display: block;
        height: 100%;
        background-color: skyblue;
        width: calc(1% * var(--percent));
      }
      .slider-thumb {
        position: absolute;
        width: 16px;
        height: 16px;
        border: 0;
        padding: 0;
        background: #fff;
        box-shadow: 0 0 0 1px skyblue;
        border-radius: 50%;
        left: calc(1% * var(--percent));
        top: 0;
        margin: auto -8px;
      }
    </style>
  </head>
  <body></body>

  <script>
    function createElement(tagName, className) {
      let element = document.createElement(tagName);
      element.classList.add(className);
      return element;
    }

    let div = createElement("div", "slider");
    let btn1 = createElement("button", "slider-track");
    let btn2 = createElement("button", "slider-thumb");

    console.log(div);

    div.appendChild(btn1);
    div.appendChild(btn2);

    document.body.appendChild(div);

    // divReal.style['--percent'] = 50
    div.setAttribute("style", "--percent: 50;");

    btn2.addEventListener("click", e => e.stopPropagation());
    div.addEventListener("click", function(event) {
      this.setAttribute(
        "style",
        `--percent:${Math.ceil((event.offsetX / this.offsetWidth) * 100)}`
      );
    });

    document.addEventListener("mousedown", function(e) {
      if (event.target !== btn2) return;

      document.addEventListener("mousemove", move);
    });

    document.addEventListener("mouseup", function(e) {
      document.removeEventListener("mousemove", move);
    });

    function move(event) {
      let { left } = div.getBoundingClientRect();
      // console.log(event.offsetX, div.offsetWidth);
      // event.stopPropagation()
      // console.log(object);
      let value = Math.ceil(((event.clientX - left) / div.offsetWidth) * 100);
      // console.log(value);
      value <= 0 && div.setAttribute("style", `--percent: 0`);

      value >= 100 && div.setAttribute("style", `--percent: 100`);

      value > 0 &&
        value < 100 &&
        div.setAttribute("style", `--percent:${value}`);
      // if (value <= 0 ? 0 : value) {
      //   div.setAttribute('style', `--percent:${value}`)
      // } else if (value >= 100 ? 100: value) {
      //   div.setAttribute('style', `--percent:${value}`)
      // }
      // console.log(rleft);
      // div.setAttribute('style', `--percent:${Math.ceil(rleft / div.offsetWidth * 100)}`)
    }
  </script>
</html>
